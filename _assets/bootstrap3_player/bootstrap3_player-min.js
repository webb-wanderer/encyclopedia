!function($){"use strict";$("audio[controls]").before((function(){var t=this;t.controls=!1;var e=document.createElement("div");$(e).addClass($(t).attr("class")+" well container-fluid playa");var n=document.createElement("section");$(n).addClass("collapsing center-block row col-sm-12");var a=document.createElement("div");$(a).addClass("btn-group center-block row col-sm-12");var o=document.createElement("button");$(o).attr("type","button"),$(o).html('<i class="glyphicon glyphicon-align-justify" style="top:-3px"></i>'),$(o).addClass("btn btn-default btn-lg btn-block row col-sm-12"),$(o).attr("style","opacity:0.3"),$(o).click((function(){$(n).collapse("toggle")})),$(o).attr("title","Details"),$(o).tooltip({container:"body",placement:"top",html:!0}),$(a).append(o);var i=document.createElement("table");$(i).addClass("table table-condensed");var l=document.createElement("section");$(l).addClass("btn-group  center-block row  col-sm-12");var r=function(){$(e).find(".btn").addClass("disabled"),$(e).find('input[type="range"]').hide(),$(e).find(".glyphicon-refresh").text("Error"),$(e).find(".glyphicon-refresh").parent().attr("title","There was an error loading the audio."),$(e).find(".glyphicon-refresh").parent().tooltip("fixTitle"),$(e).find(".glyphicon-refresh").removeClass("glyphicon glyphicon-refresh spin")},d=function(e,n){var a=document.createElement("tr"),o=document.createElement("th"),l=document.createElement("td");$(o).html(e),$(l).html($(t).data(n)),$(a).append(o),$(a).append(l),$(i).append(a)},c=function(){var n,a;"off"!==$(t).data("play")&&function(){var e=document.createElement("button");$(e).attr("type","button"),$(e).addClass("btn  btn-default disabled col-sm-1"),e.setPlayState=function(n){$(e).removeClass("disabled"),"play"===n&&($(e).html('<i class="glyphicon glyphicon-play"></i>'),$(e).click((function(){t.play()}))),t.paused&&"pause"!==n||($(e).html('<i class="glyphicon glyphicon-pause"></i>'),$(e).click((function(){t.pause()})))},$(t).on("play",(function(){e.setPlayState("pause")})),$(t).on("canplay",(function(){e.setPlayState("play")})),$(t).on("pause",(function(){e.setPlayState("play")}));var n=0,a=setInterval((function(){return t.paused?!1===isNaN(t.duration)?(e.setPlayState("play"),clearInterval(a),!0):3===t.networkState||100===n?(console.log("No audio source was found or a timeout occurred"),r(),clearInterval(a),!1):void n++:(e.setPlayState("pause"),clearInterval(a),!0)}),100);$(l).append(e)}(),"off"!==$(t).data("seek")&&function(){var e=document.createElement("input");$(e).attr({type:"range",min:0,value:0,class:"seek"}),e.progress=function(){var n,a,o,i="rgba(223, 240, 216, 1) 0%";for(i+=", rgba(223, 240, 216, 1) "+t.currentTime/t.duration*100+"%",i+=", rgba(223, 240, 216, 0) "+t.currentTime/t.duration*100+"%",n=0;n<t.buffered.length;n++)t.buffered.end(n)>t.currentTime&&!1===isNaN(t.buffered.end(n))&&!1===isNaN(t.buffered.start(n))&&(o=t.buffered.end(n)<t.duration?t.buffered.end(n)/t.duration*100:100,i+=", rgba(217, 237, 247, 0) "+(a=t.buffered.start(n)>t.currentTime?t.buffered.start(n)/t.duration*100:t.currentTime/t.duration*100)+"%",i+=", rgba(217, 237, 247, 1) "+a+"%",i+=", rgba(217, 237, 247, 1) "+o+"%",i+=", rgba(217, 237, 247, 0) "+o+"%");$(e).css("background","-webkit-linear-gradient(left, "+i+")"),$(e).css("background-color","#ddd")},e.set=function(){$(e).val(t.currentTime),e.progress()},e.slide=function(){t.currentTime=$(e).val(),e.progress()},e.init=function(){$(e).attr({max:t.duration,step:t.duration/100}),e.set()},e.reset=function(){$(e).val(0),t.currentTime=$(e).val(),t.loop?t.play():t.pause()};var n=document.createElement("div");$(n).addClass("btn btn-default col-sm-4 hidden-xs"),$(n).append(e),$(e).on("change",e.slide),$(t).on("timeupdate",e.init),$(t).on("loadedmetadata",e.init),$(t).on("loadeddata",e.init),$(t).on("progress",e.init),$(t).on("canplay",e.init),$(t).on("canplaythrough",e.init),$(t).on("ended",e.reset),t.readyState>0&&e.init(),$(l).append(n)}(),"off"!==$(t).data("time")&&(n=document.createElement("button"),$(n).attr("type","button"),$(n).addClass("btn btn-default col-sm-3"),$(n).tooltip({container:"body",placement:"right",html:!0}),n.twodigit=function(t){return("0"+t).slice(-2)},n.timesplit=function(t){if(isNaN(t))return'<i class="glyphicon glyphicon-refresh spin"></i>';var e=Math.floor(t/3600),a=Math.floor(t/60)-60*e,o=Math.floor(t)-3600*e-60*a,i=n.twodigit(a)+":"+n.twodigit(o);return e>0&&(i=e+":"+i),i},n.showtime=function(){t.paused?($(n).html(n.timesplit(t.duration)),$(n).attr({title:'Click to Reset<hr style="padding:0; margin:0;" />Position: '+n.timesplit(t.currentTime)})):($(n).html(n.timesplit(t.currentTime)),$(n).attr({title:'Click to Reset<hr style="padding:0; margin:0;" />Length: '+n.timesplit(t.duration)})),$(n).tooltip("fixTitle")},$(n).click((function(){t.pause(),t.currentTime=0,n.showtime(),$(n).tooltip("fixTitle"),$(n).tooltip("show")})),$(n).tooltip("show"),$(t).on("loadedmetadata",n.showtime),$(t).on("loadeddata",n.showtime),$(t).on("progress",n.showtime),$(t).on("canplay",n.showtime),$(t).on("canplaythrough",n.showtime),$(t).on("timeupdate",n.showtime),t.readyState>0?n.showtime():$(n).html('<i class="glyphicon glyphicon-refresh spin"></i>'),$(l).append(n)),"off"!==$(t).data("mute")&&(a=document.createElement("button"),$(a).attr("type","button"),$(a).addClass("btn btn-default  col-sm-1"),a.checkVolume=function(){t.volume>.5&&!t.muted?$(a).html('<i class="glyphicon glyphicon-volume-up"></i>'):t.volume<.5&&t.volume>0&&!t.muted?$(a).html('<i class="glyphicon glyphicon-volume-down"></i>'):$(a).html('<i class="glyphicon glyphicon-volume-off"></i>')},$(a).click((function(){t.muted?(t.muted=!1,t.volume=t.oldvolume):(t.muted=!0,t.oldvolume=t.volume,t.volume=0),a.checkVolume()})),a.checkVolume(),$(t).on("volumechange",a.checkVolume),$(l).append(a)),"off"!==$(t).data("volume")&&function(){var e=document.createElement("input");$(e).attr({type:"range",min:0,max:1,step:.01,value:1}),e.slide=function(){t.muted=!1,t.volume=$(e).val()},e.set=function(){$(e).val(t.volume)};var n=document.createElement("div");$(n).addClass("btn  btn-default  row col-sm-3  hidden-xs"),$(n).append(e),$(e).on("change",e.slide),$(t).on("volumechange",e.set),$(l).append(n)}(),$(e).append(l)};return function(){var o;void 0!==$(t).data("infoAlbumArt")&&(o=document.createElement("img"),$(o).addClass("thumbnail"),$(o).attr("src",$(t).data("infoAlbumArt")),$(n).append(o)),void 0!==$(t).data("infoArtist")&&d("Artist","infoArtist"),void 0!==$(t).data("infoTitle")&&d("Title","infoTitle"),void 0!==$(t).data("infoAlbumTitle")&&d("Album","infoAlbumTitle"),void 0!==$(t).data("infoLabel")&&d("Label","infoLabel"),void 0!==$(t).data("infoYear")&&d("Year","infoYear"),""!==$(i).html()&&($(n).append(i),$(e).append(a),$(e).append(n))}(),c(),void 0!==$(t).data("infoAtt")&&function(){var n=document.createElement("div");if($(n).addClass("row col-sm-10 col-sm-offset-1"),void 0!==$(t).data("infoAttLink")){var a=document.createElement("a");$(a).addClass("text-muted btn btn-link btn-sm"),$(a).attr("href",$(t).data("infoAttLink")),$(a).html($(t).data("infoAtt")),$(n).append(a)}else $(n).html($(t).data("infoAtt"));$(e).append(n)}(),$(t).on("error",(function(){console.log("Error encountered after fillPlayerBox"),r()})),e}))}(jQuery);